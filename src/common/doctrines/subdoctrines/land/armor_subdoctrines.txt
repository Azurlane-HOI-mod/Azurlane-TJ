#碧蓝航线MOD
armored_spearhead_TIX = {
    track = armor
    name = AZ_SUBDOCTRINE_ARMORED_SPEARHEAD
    description = SUBDOCTRINE_ARMORED_SPEARHEAD_DESC
    icon = GFX_doctrine_armored_spearhead_medium

    xp_cost = 100
    xp_type = army

    available = {
        shijianniangguojia_trigger = yes
        OR = {
            has_doctrine = new_mobile_warfare
            has_doctrine = superior_firepower
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 1000
            original_tag = TIX
        }
        modifier = {
            factor = 0.5
            is_major = no
        }
    }

    # EFFECTS
    army_speed_factor = 0.1
    enable_tactic = tactic_breakthrough

    rewards = {
        TIX1 = {
        #1
            category_tanks= {
                max_strength = 2
                max_organisation = 5
                default_morale = 0.2
                breakthrough = 0.1
            }
        }
        TIX2 = {
        #2
            breakthrough_factor = 0.1
            category_all_armor = {
                maximum_speed = 0.1
                breakthrough = 0.2
            }
        }
        TIX3 = {
        #3
            armored_car = {
                default_morale = 0.3
                max_organisation = 15
            }
            light_armor = {
                default_morale = 0.2
                max_organisation = 10
            }
        }
        TIX4 = {
        #4
            army_armor_attack_factor = 0.2
            category_all_armor = {
                breakthrough = 0.2
            }
        }
        TIX5 = {
        #5
            enable_tactic = tactic_breakthrough_for_tix
            army_armor_defence_factor = 0.2
            armored_car = {
                default_morale = 0.3
                max_organisation = 5
                breakthrough = 0.4
            }
             category_tanks= {
                max_strength = 3
                max_organisation = 5
                breakthrough = 0.2
            }
        }
    }
}

mobile_defense_BYG = {
    track = armor
    name = AZ_SUBDOCTRINE_MOBILE_DEFENSE
    description = SUBDOCTRINE_MOBILE_DEFENSE_DESC
    icon = GFX_doctrine_mobile_defense_medium

    xp_cost = 100
    xp_type = army

    available = {
        shijianniangguojia_trigger = yes
        OR = {
            has_doctrine = superior_firepower
            has_doctrine = new_mobile_warfare
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 1000
            original_tag = BYG
        }

        modifier = {
            factor = 0.5
            is_major = no
        }

    }

    armored_engineer = {
        battalion_mult = {
            category = category_all_armor
            entrenchment = 0.03
        }
    }
    category_all_armor = {
        defense = 0.2
    }

    rewards = {

        BYG1 = {
            mechanized = {
                defense = 0.15
                soft_attack = 0.25
            }
        }
        BYG2 = {
            experience_loss_factor = -0.1
            light_armor = {
                breakthrough = 0.15
                default_morale = 0.2
            }
            medium_armor = {
                breakthrough = 0.15
                default_morale = 0.2
            }
        }
        BYG3 = {
            land_night_attack = 0.1
            assault_engineer = {
                max_organisation = 20
            }
            armored_engineer = {
                max_organisation = 20
            }
            armored_signal = {
                max_organisation = 20
            }

        }
        BYG4 = {
            anti_tank = {
                battalion_mult = {
                    category = category_all_armor
                    hard_attack = 0.2
                    ap_attack = 0.2

                }
            }

        }
        BYG5 = {
            enable_tactic = tactic_tactical_withdrawal_huj
            category_all_armor = {
                hard_attack = 0.1
                soft_attack = 0.1
                ap_attack = 0.2
            }
        }    
    }
}

streamlined_deployment_BFL = {
    track = armor
    name = AZ_SUBDOCTRINE_STREAMLINED_DEPLOYMENT
    description = SUBDOCTRINE_STREAMLINED_DEPLOYMENT_DESC
    icon = GFX_doctrine_streamlined_deployment_medium

    xp_cost = 100
    xp_type = army

    available = {
        shijianniangguojia_trigger = yes
        OR = {
            has_doctrine = mass_assault
            has_doctrine = grand_battleplan
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 1000
            OR = {
                original_tag = BFL 
                original_tag = DOH 
            }
        }

    }
    unit_medium_armor_design_cost_factor = -0.5
    unit_light_armor_design_cost_factor  = -0.5
    category_all_armor = {
        soft_attack = 0.1
        breakthrough = 0.1
        defence = 0.1
    }


    rewards = {
        BFL1 = {

            unit_medium_armor_design_cost_factor = -0.5
            unit_light_armor_design_cost_factor  = -0.5
            light_tank_recon = {
                battalion_mult = {
                    category = category_all_armor
                    max_organisation = 3
                    add = yes
                }
            }

        }
        BFL2 = {
            mechanized_attack_factor = 0.2
            mechanized = {
                max_organisation = 10
                default_morale = 0.3
            }
            category_all_armor = {
                default_morale = 0.3
            }
        }
        BFL3 = {
            army_speed_factor = 0.1
            armored_signal = {
                battalion_mult = {
                    category = category_light_infantry
                    maximum_speed = 0.1
                }
            }
            light_tank_recon = {
                battalion_mult = {
                    category = category_light_infantry
                    maximum_speed = 0.1
                }
            }
        }
        BFL4 = {
            supply_consumption_factor = -0.2
            category_all_armor = {
                reliability = 0.1
                supply_consumption = -0.05
            }

        }
        BFL5 = {
            enable_tactic = tactic_masterful_blitz_for_bfl
            army_attack_speed_factor = 1
            category_all_armor = {
                default_morale = 0.3
                max_organisation = 5
            }
        }
    }


}

armored_infantry_support_HUJ = {
    track = armor
    name = AZ_SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT
    description = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT_DESC
    icon = GFX_doctrine_armored_infantry_support_medium

    xp_cost = 100
    xp_type = army

    available = {
        shijianniangguojia_trigger = yes
        OR = {
            has_doctrine = mass_assault
            has_doctrine = grand_battleplan
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 1000
            OR = {
               original_tag = HUJ
               original_tag = YUW
            }
        }
        modifier = {
            factor = 0.5
            is_major = no
        }
    }

    # EFFECTS
    motorized_attack_factor = 0.2
    mechanized_attack_factor = 0.2
    enable_tactic = tactic_blitz
    effect = {
        add_tech_bonus = {
            bonus = 1
            uses = 1
            category = cat_heavy_armor
            name = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT
        }
    }

    #TODO jack look if you can make a script effect for production bonuses

    rewards = {
        HUJ1 = {
        #1
            medium_armor = {
                breakthrough = 0.1
                soft_attack = 0.15
            }
            heavy_armor = {
                breakthrough = 0.1
                soft_attack = 0.15
            }
        }
        HUJ2 = {
        #2
            medium_armor = {
                max_organisation = 10
            }
            heavy_armor = {
                max_organisation = 10
            }
        }
        HUJ3 = {
        #3
            medium_armor = {
                max_strength = 5
                reliability = 0.15
            }
            heavy_armor = {
                max_strength = 5
                reliability = 0.15
            }
        }
        HUJ4 = {
        #4
            supply_node_range = 0.1
            medium_armor = {
                supply_consumption = -0.08
            }
            heavy_armor = {
                supply_consumption = -0.12
            }
        }
        HUJ5 = {
        #5
            enable_tactic = tactic_breakthrough_for_tix
            experience_gain_infantry_combat_factor = 0.25
            experience_gain_medium_armor_combat_factor = 0.25
            experience_gain_heavy_armor_combat_factor = 0.25
            category_all_infantry = {
                breakthrough = 0.3
            }
            medium_armor = {
                breakthrough = 0.1
            }
            heavy_armor = {
                breakthrough = 0.2
            }
        }
    }
}

armored_cavalry_CHY = {
    track = armor
    name = AZ_SUBDOCTRINE_ARMORED_CAVALRY
    description = SUBDOCTRINE_ARMORED_CAVALRY_DESC
    icon = GFX_doctrine_armored_cavalry_medium

    xp_cost = 100
    xp_type = army


    available = {
       shijianniangguojia_trigger = yes
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 1000
            OR = {
                original_tag = SAD 
                original_tag = CHY 
            }
        }

    }

    armored_car = {
        max_organisation = 10
        defense = 0.2
    }
    mechanized =  {
        max_organisation = 10
        defense = 0.1
    }
    # EFFECTS
    rewards = {
        CHY1 = {
            light_armor = {
                maximum_speed = 0.1
                max_organisation = 10
                breakthrough = 0.2
            }
        }
        CHY2 = {
            motorized_attack_factor = 0.2
            motorized_defence_factor = 0.2
            motorized_military_police = {
                    battalion_mult = {
                        category = category_vehicle_infantry
                        suppression_factor = 0.2
                    }
    
            }
            armored_car = {
                suppression_factor = 0.5
            }
        }
        CHY3 = {
            army_speed_factor = 0.1
            light_armor = {
                maximum_speed = 0.1
                breakthrough = 0.2
            }
            armored_car = {
                maximum_speed = 0.1
                breakthrough = 0.2
                soft_attack = 0.2
    
            }
            mechanized = {
                maximum_speed = 0.1
                breakthrough = 0.1
            }
        }
        CHY4 = {
            recon_factor = 1
            armored_car_recon = {
                max_organisation = 5
                 soft_attack = 0.2
            }
            light_tank_recon = {
                max_organisation = 5
                soft_attack = 0.2
            }
        }
        CHY5 = {
            enable_tactic = tactic_elastic_defense_for_sad
            enable_tactic = tactic_infantry_charge_for_chy
            armored_car = {
                max_organisation = 10
                soft_attack = 0.2
                default_morale = 0.3
            }
            light_armor = {
                max_organisation = 10
                soft_attack = 0.2
                hard_attack = 0.4
                default_morale = 0.3
            }
            mechanized = {
                max_organisation = 10
                soft_attack = 0.2
                default_morale = 0.3
            }
            motorized = {
                max_organisation = 10
                soft_attack = 0.2
                default_morale = 0.3
            }
        }
    }
}

##################以下为原版#######################

armored_spearhead_no_lar = {
    track = armor
    name = SUBDOCTRINE_ARMORED_SPEARHEAD
    description = SUBDOCTRINE_ARMORED_SPEARHEAD_DESC
    icon = GFX_doctrine_armored_spearhead_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }
    visible = {
        NOT = {
            has_dlc = "La Resistance"
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 25
            original_tag = TIX
        }
        modifier = {
            factor = 0.5
            is_major = no
        }
    }

    # EFFECTS
    enable_tactic = tactic_breakthrough

    rewards = {
        force_concentration = {
        #1
            category_tanks= {
                max_organisation = 1
                default_morale = 0.1
            }
        }
        armored_breakthrough_exploits = {
        #2
            category_all_armor = {
                breakthrough = 0.1
            }
        }
        local_reserves = {
        #3
            recon = {
                max_organisation = 10
            }

            light_armor = {
                default_morale = 0.1
                max_organisation = 3
            }
        }
        tactical_reconnaissance = {
        #4
            category_all_armor = {
                breakthrough = 0.1
            }
        }
        assault_detachments = {
        #5
            
             category_tanks= {
                max_organisation = 3
                breakthrough = 0.2
            }
        }
    }
}
armored_infantry_support = {
    track = armor
    name = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT
    description = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT_DESC
    icon = GFX_doctrine_armored_infantry_support_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 25
            OR = {
               original_tag = HUJ
               original_tag = YUW
            }
        }
        modifier = {
            factor = 0.5
            is_major = no
        }
    }

    # EFFECTS
    enable_tactic = tactic_blitz
    effect = {
        add_tech_bonus = {
            bonus = 1
            uses = 1
            category = cat_heavy_armor
            name = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT
        }
    }

    #TODO jack look if you can make a script effect for production bonuses

    rewards = {
        mobile_reserves = {
        #1
            medium_armor = {
                breakthrough = 0.05
                soft_attack = 0.1
            }
            heavy_armor = {
                breakthrough = 0.05
                soft_attack = 0.1
            }
        }
        armored_cohorts = {
        #2
            medium_armor = {
                max_organisation = 7
            }
            heavy_armor = {
                max_organisation = 7
            }
        }
        maintenance_routines = {
        #3
            armored_maintenance = {
                battalion_mult = {
                    category = category_all_armor
                    max_strength = 0.15
                    add = yes
                }
            }
        }
        fuel_rationing = {
        #4
            heavy_armor = {
                supply_consumption = -0.08
            }
        }
        mobile_armored_strongpoints = {
        #5
            category_all_infantry = {
                breakthrough = 0.05
            }
            heavy_armor = {
                breakthrough = 0.1
            }
        }
    }
}

streamlined_deployment = {
    track = armor
    name = SUBDOCTRINE_STREAMLINED_DEPLOYMENT
    description = SUBDOCTRINE_STREAMLINED_DEPLOYMENT_DESC
    icon = GFX_doctrine_streamlined_deployment_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

        ai_will_do = {

        base = 1
        modifier = {
            factor = 25
            OR = {
                original_tag = BFL 
                original_tag = DOH 
                original_tag = PRC 
            }
        }

    }

    category_all_armor = {
        soft_attack = 0.1
        breakthrough = 0.1
    }


    rewards = {
        flexible_armored_battalions = {

            unit_medium_armor_design_cost_factor = -0.5
            unit_light_armor_design_cost_factor  = -0.5
            light_tank_recon = {
                battalion_mult = {
                    category = category_all_armor
                    max_organisation = 2
                    add = yes
                }
            }

        }
        mechanized_wave = {
            mechanized = {
                max_organisation = 5
                default_morale = 0.2
            }
            category_all_armor = {
                default_morale = 0.2
            }
        }
        tank_desant = {
            armored_signal = {
                battalion_mult = {
                    category = category_light_infantry
                    maximum_speed = 0.05
                }
            }
            light_tank_recon = {
                battalion_mult = {
                    category = category_light_infantry
                    maximum_speed = 0.05
                }
            }
        }
        full_front_deployment = {
            category_all_armor = {
                reliability = 0.05
                supply_consumption = -0.02
            }

        }
        continuous_offensives = {
            category_all_armor = {
                default_morale = 0.2
                max_organisation = 2
            }
        }
    }


}

mobile_defense = {
    track = armor
    name = SUBDOCTRINE_MOBILE_DEFENSE
    description = SUBDOCTRINE_MOBILE_DEFENSE_DESC
    icon = GFX_doctrine_mobile_defense_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

        ai_will_do = {

        base = 1
        modifier = {
            factor = 25
            original_tag = BYG
        }

        modifier = {
            factor = 0.5
            is_major = no
        }

    }

    armored_engineer = {
        battalion_mult = {
            category = category_all_armor
            entrenchment = 0.02
        }
    }
    category_all_armor = {
        defense = 0.1
    }

    rewards = {

        mechanized_offensive = {
            mechanized = {
                defense = 0.1
                soft_attack = 0.1
            }
        }
        advance_under_fire = {
            light_armor = {
                breakthrough = 0.1
                default_morale = 0.2
            }
            medium_armor = {
                breakthrough = 0.1
                default_morale = 0.2
            }
        }
        attached_support = {
            assault_engineer = {
                max_organisation = 10
            }
            armored_engineer = {
                max_organisation = 10
            }
            armored_signal = {
                max_organisation = 10
            }

        }
        combined_anti_armor = {
            anti_tank = {
                battalion_mult = {
                    category = category_all_armor
                    hard_attack = 0.05
                    ap_attack = 0.05

                }
            }

        }
        tank_on_tank_engagement = {
            category_all_armor = {
                hard_attack = 0.1
                soft_attack = 0.1
                ap_attack = 0.05
            }
        }    
    }
}

armored_cavalry = {
    track = armor
    name = SUBDOCTRINE_ARMORED_CAVALRY
    description = SUBDOCTRINE_ARMORED_CAVALRY_DESC
    icon = GFX_doctrine_armored_cavalry_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }
    visible = {
       AND = {
            has_dlc = "No Compromise, No Surrender"
            has_dlc = "La Resistance"
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 25
            OR = {
                original_tag = SAD 
                original_tag = CHY 
            }
        }

    }

    armored_car = {
        max_organisation = 5
        defense = 0.1
    }
    mechanized =  {
        max_organisation = 5
        defense = 0.05
    }
    # EFFECTS
    rewards = {
        cruiser_tanks = {
            light_armor = {
                maximum_speed = 0.1
                max_organisation = 5
                breakthrough = 0.05
            }
        }
        quick_response_force = {
            motorized_military_police = {
                    battalion_mult = {
                        category = category_vehicle_infantry
                        suppression_factor = 0.05
                    }
    
            }
            armored_car = {
                suppression_factor = 0.2
            }
        }
        speed_as_armour = {
            light_armor = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
            armored_car = {
                maximum_speed = 0.05
                breakthrough = 0.1
                soft_attack = 0.1
    
            }
            mechanized = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
        }
        fighting_reconnaissance = {
            armored_car_recon = {
                max_organisation = 3
                 soft_attack = 0.05
            }
            light_tank_recon = {
                max_organisation = 2
                soft_attack = 0.05
            }
        }
        sustained_deployments = {
            armored_car = {
                max_organisation = 5
                soft_attack = 0.05
                default_morale = 0.2
            }
            light_armor = {
                max_organisation = 5
                soft_attack = 0.05
                hard_attack = 0.1
                default_morale = 0.2
            }
            mechanized = {
                max_organisation = 5
                soft_attack = 0.05
                default_morale = 0.2 
            }
            motorized = {
                max_organisation = 5
                soft_attack = 0.05
                default_morale = 0.2 
            }
        }
    }
}

armored_cavalry_no_lar = {
    track = armor
    name = SUBDOCTRINE_ARMORED_CAVALRY
    description = SUBDOCTRINE_ARMORED_CAVALRY_DESC
    icon = GFX_doctrine_armored_cavalry_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }
    visible = {
        has_dlc = "No Compromise, No Surrender"
        NOT = {
            has_dlc = "La Resistance"
        }
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 25
            OR = {
                original_tag = SAD 
                original_tag = CHY 
            }
        }

    }

    motorized = {
        max_organisation = 5
        defense = 0.1
    }
    mechanized =  {
        max_organisation = 5
        defense = 0.05
    }
    # EFFECTS
    rewards = {
        cruiser_tanks = {
            light_armor = {
                maximum_speed = 0.1
                max_organisation = 5
                breakthrough = 0.05
            }
        }
        quick_response_force = {
            motorized_military_police = {
                    battalion_mult = {
                        category = category_vehicle_infantry
                        suppression_factor = 0.05
                    }
    
            }
            
        }
        speed_as_armour = {
            light_armor = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
            motorized = {
                maximum_speed = 0.05
    
            }
            mechanized = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
        }
        fighting_reconnaissance = {
            recon = {
                max_organisation = 3
                 soft_attack = 0.05
            }
            light_tank_recon = {
                max_organisation = 2
                soft_attack = 0.05
            }
        }
        sustained_deployments = {
            light_armor = {
                max_organisation = 5
                soft_attack = 0.05
                hard_attack = 0.1
                default_morale = 0.2
            }
            mechanized = {
                max_organisation = 5
                soft_attack = 0.05
                default_morale = 0.2 
            }
            motorized = {
                max_organisation = 5
                soft_attack = 0.05
                default_morale = 0.2 
            }
        }
    }
}

tank_destroyer_force = {
     track = armor
    name = SUBDOCTRINE_TANK_DESTROYER_FORCE
    description = SUBDOCTRINE_TANK_DESTROYER_FORCE_DESC
    icon = GFX_doctrine_tank_destroyer_force_medium

    xp_cost = 100
    xp_type = army

    visible = {
        has_dlc = "No Compromise, No Surrender"
    }

    ai_will_do = {

        base = 0

    }  

    category_all_armor = {
        defense = 0.1
        hard_attack = 0.1
        ap_attack = 0.1
    }

    rewards = {

        mobile_anti_tank = {
            mot_anti_tank_brigade = {
                max_organisation = 10
                hard_attack = 0.1
                ap_attack = 0.1
            }

        }
        committed_operational_units = {
            assault_engineer = {
                battalion_mult = {
                    category = category_tank_destroyers
                    reliability = 0.02
                    soft_attack = 0.05
                    hard_attack = 0.1
                }
            }
        }
        redeployment_priority = {
            category_tank_destroyers = {
                supply_consumption = -0.02
                default_morale = 0.2
            }
        }

        independent_counterattacks = {
            category_tank_destroyers = {
                max_organisation = 6
                initiative = 0.1
            }
        }

        selfsufficient_battalion = {
            armored_signal = {
                battalion_mult = {
                    category = category_tank_destroyers
                    hard_attack = 0.1
                    ap_attack = 0.2

                }
            }
        }



    }
}
